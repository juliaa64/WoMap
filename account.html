<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Cuenta - WoMap</title>
    <!-- Added favicon -->
    <link rel="icon" type="image/png" href="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/logo_final-67k6gvntnpyybZBRQTHzo5q4HXed8b.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Accessibility Panel moved to bottom right -->
    <div class="accessibility-panel" id="accessibilityPanel">
        <button class="accessibility-toggle" id="accessibilityToggle" aria-label="Toggle accessibility panel">‚öôÔ∏è</button>
        <div class="accessibility-content" id="accessibilityContent">
            <h3 data-es="Accesibilidad" data-en="Accessibility">Accesibilidad</h3>
            <div class="accessibility-option">
                <label data-es="Tema" data-en="Theme">Tema</label>
                <button id="themeToggle" class="toggle-btn"><span class="toggle-icon">üåô</span></button>
            </div>
            <div class="accessibility-option">
                <label data-es="Tama√±o de Texto" data-en="Text Size">Tama√±o de Texto</label>
                <select id="fontSizeSelect">
                    <option value="small" data-es="Peque√±o" data-en="Small">Peque√±o</option>
                    <option value="medium" selected data-es="Mediano" data-en="Medium">Mediano</option>
                    <option value="large" data-es="Grande" data-en="Large">Grande</option>
                    <option value="xlarge" data-es="Muy Grande" data-en="X-Large">Muy Grande</option>
                </select>
            </div>
            <div class="accessibility-option">
                <label data-es="Idioma" data-en="Language">Idioma</label>
                <select id="languageSelect">
                    <option value="es">Espa√±ol</option>
                    <option value="en">English</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Added logo image -->
            <a href="dashboard.html" class="nav-logo">
                <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/logo_final-67k6gvntnpyybZBRQTHzo5q4HXed8b.png" alt="WoMap Logo" class="logo-image">
                WoMap
            </a>
            <div class="nav-links">
                <a href="map.html" class="nav-link" data-es="Mapa" data-en="Map">Mapa</a>
                <a href="community.html" class="nav-link" data-es="Comunidad" data-en="Community">Comunidad</a>
                <a href="reviews.html" class="nav-link" data-es="Reviews" data-en="Reviews">Reviews</a>
                <!-- Account icon links to dashboard, active state -->
                <a href="dashboard.html" class="account-btn active" aria-label="Account">
                    <span class="account-icon">üë§</span>
                </a>
            </div>
        </div>
    </nav>

    <section class="dashboard-section">
        <div class="container">
            <a href="dashboard.html" class="btn btn-outline" style="margin-bottom: 20px; display: inline-block;">
                <span data-es="‚Üê Volver al Dashboard" data-en="‚Üê Back to Dashboard">‚Üê Volver al Dashboard</span>
            </a>
            
            <h1 data-es="Mi Cuenta" data-en="My Account">Mi Cuenta</h1>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-top: 40px;">
                <!-- Profile Section -->
                <div>
                    <div class="auth-card" style="margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                            <h2 data-es="Informaci√≥n Personal" data-en="Personal Information">Informaci√≥n Personal</h2>
                            <!-- Edit functionality with save button -->
                            <button id="editBtn" class="btn btn-outline btn-sm">
                                <span data-es="‚úèÔ∏è Editar" data-en="‚úèÔ∏è Edit">‚úèÔ∏è Editar</span>
                            </button>
                            <button id="saveBtn" class="btn btn-primary btn-sm" style="display: none;">
                                <span data-es="üíæ Guardar" data-en="üíæ Save">üíæ Guardar</span>
                            </button>
                        </div>

                        <div class="form-group">
                            <label data-es="Foto de Perfil" data-en="Profile Picture">Foto de Perfil</label>
                            <div class="profile-picture-upload">
                                <div class="profile-picture-preview large" id="accountProfilePicturePreview">
                                    <span class="preview-icon">üë§</span>
                                </div>
                                <input type="file" id="accountProfilePicture" accept="image/*" style="display: none;">
                                <button type="button" id="changePhotoBtn" class="btn btn-outline btn-sm" style="display: none;" data-es="Cambiar Foto" data-en="Change Photo">Cambiar Foto</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label data-es="Nombre" data-en="Name">Nombre</label>
                            <input type="text" id="profileName" value="Mar√≠a Garc√≠a" readonly>
                        </div>

                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" value="maria@example.com" readonly>
                            <p style="font-size: 0.85em; color: var(--text-secondary); margin-top: 5px;" data-es="El email no se puede modificar" data-en="Email cannot be modified">El email no se puede modificar</p>
                        </div>

                        <div class="form-group">
                            <label data-es="Edad" data-en="Age">Edad</label>
                            <input type="number" id="profileAge" value="28" readonly>
                        </div>

                        <div class="form-group">
                            <label data-es="Ciudad" data-en="City">Ciudad</label>
                            <input type="text" id="profileCity" value="Madrid" readonly>
                        </div>

                        <div class="form-group">
                            <label data-es="Descripci√≥n" data-en="Description">Descripci√≥n</label>
                            <textarea id="profileDescription" rows="4" readonly>Amante de las caminatas nocturnas y la seguridad comunitaria. Siempre disponible para ayudar.</textarea>
                        </div>

                        <div class="form-group">
                            <label data-es="Intereses" data-en="Interests">Intereses</label>
                            <input type="text" id="profileInterests" value="Senderismo, Fotograf√≠a, Comunidad" readonly>
                        </div>
                    </div>

                    <!-- Recent Routes -->
                    <div class="auth-card">
                        <h2 style="margin-bottom: 20px;" data-es="√öltimas Rutas" data-en="Recent Routes">√öltimas Rutas</h2>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="background: var(--background); padding: 15px; border-radius: 8px; border: 1px solid var(--border);">
                                <p style="font-weight: bold; margin-bottom: 5px;">Plaza Mayor ‚Üí Retiro</p>
                                <p style="font-size: 0.9em; color: var(--text-secondary);">
                                    <span data-es="Hace 2 d√≠as ‚Ä¢ 3.2 km ‚Ä¢ Seguridad: Alta" data-en="2 days ago ‚Ä¢ 3.2 km ‚Ä¢ Safety: High">Hace 2 d√≠as ‚Ä¢ 3.2 km ‚Ä¢ Seguridad: Alta</span>
                                </p>
                            </div>
                            <div style="background: var(--background); padding: 15px; border-radius: 8px; border: 1px solid var(--border);">
                                <p style="font-weight: bold; margin-bottom: 5px;">Sol ‚Üí Callao</p>
                                <p style="font-size: 0.9em; color: var(--text-secondary);">
                                    <span data-es="Hace 5 d√≠as ‚Ä¢ 1.5 km ‚Ä¢ Seguridad: Alta" data-en="5 days ago ‚Ä¢ 1.5 km ‚Ä¢ Safety: High">Hace 5 d√≠as ‚Ä¢ 1.5 km ‚Ä¢ Seguridad: Alta</span>
                                </p>
                            </div>
                            <div style="background: var(--background); padding: 15px; border-radius: 8px; border: 1px solid var(--border);">
                                <p style="font-weight: bold; margin-bottom: 5px;">Atocha ‚Üí Lavapi√©s</p>
                                <p style="font-size: 0.9em; color: var(--text-secondary);">
                                    <span data-es="Hace 1 semana ‚Ä¢ 2.1 km ‚Ä¢ Seguridad: Media" data-en="1 week ago ‚Ä¢ 2.1 km ‚Ä¢ Safety: Medium">Hace 1 semana ‚Ä¢ 2.1 km ‚Ä¢ Seguridad: Media</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div style="display: flex; flex-direction: column; gap: 20px;">
                    <!-- Verification Status -->
                    <div class="auth-card" style="background: linear-gradient(135deg, #f3e8ff 0%, #fce7f3 100%); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">üõ°Ô∏è</div>
                        <h3 style="margin-bottom: 10px;" data-es="Cuenta Verificada" data-en="Verified Account">Cuenta Verificada</h3>
                        <p style="color: var(--text-secondary);" data-es="Tu identidad ha sido verificada correctamente" data-en="Your identity has been verified">Tu identidad ha sido verificada correctamente</p>
                    </div>

                    <!-- Call History -->
                    <div class="auth-card">
                        <h3 style="margin-bottom: 20px;">
                            <span data-es="üìû Historial de Llamadas" data-en="üìû Call History">üìû Historial de Llamadas</span>
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                                <p style="font-weight: bold; font-size: 0.95em;">Ana L.</p>
                                <p style="font-size: 0.85em; color: var(--text-secondary);">
                                    <span data-es="Videollamada ‚Ä¢ 15 min" data-en="Video call ‚Ä¢ 15 min">Videollamada ‚Ä¢ 15 min</span>
                                </p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 1 d√≠a" data-en="1 day ago">Hace 1 d√≠a</span>
                                </p>
                            </div>
                            <div style="padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                                <p style="font-weight: bold; font-size: 0.95em;">Luc√≠a M.</p>
                                <p style="font-size: 0.85em; color: var(--text-secondary);">
                                    <span data-es="Llamada ‚Ä¢ 8 min" data-en="Call ‚Ä¢ 8 min">Llamada ‚Ä¢ 8 min</span>
                                </p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 3 d√≠as" data-en="3 days ago">Hace 3 d√≠as</span>
                                </p>
                            </div>
                            <div>
                                <p style="font-weight: bold; font-size: 0.95em;">Carmen R.</p>
                                <p style="font-size: 0.85em; color: var(--text-secondary);">
                                    <span data-es="Videollamada ‚Ä¢ 22 min" data-en="Video call ‚Ä¢ 22 min">Videollamada ‚Ä¢ 22 min</span>
                                </p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 1 semana" data-en="1 week ago">Hace 1 semana</span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- My Reviews -->
                    <div class="auth-card">
                        <h3 style="margin-bottom: 20px;">
                            <span data-es="üí¨ Mis Reviews" data-en="üí¨ My Reviews">üí¨ Mis Reviews</span>
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                                <p style="font-weight: bold; font-size: 0.95em;">Calle Alcal√° - Noche</p>
                                <p style="font-size: 0.85em; color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 2 d√≠as" data-en="2 days ago">Hace 2 d√≠as</span>
                                </p>
                            </div>
                            <div style="padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                                <p style="font-weight: bold; font-size: 0.95em;">Parque del Retiro - Tarde</p>
                                <p style="font-size: 0.85em; color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 5 d√≠as" data-en="5 days ago">Hace 5 d√≠as</span>
                                </p>
                            </div>
                            <div>
                                <p style="font-weight: bold; font-size: 0.95em;">Metro Callao - Noche</p>
                                <p style="font-size: 0.85em; color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</p>
                                <p style="font-size: 0.8em; color: var(--text-secondary);">
                                    <span data-es="Hace 1 semana" data-en="1 week ago">Hace 1 semana</span>
                                </p>
                            </div>
                        </div>
                        <a href="reviews.html">
                            <button class="btn btn-outline full-width" style="margin-top: 15px;" data-es="Ver todas" data-en="View all">Ver todas</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Company Footer -->
    <footer class="company-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3 class="footer-title">WoMap</h3>
                    <p class="footer-text" data-es="Camina con voz, camina segura." data-en="Walk with a voice, walk safe.">
                        Camina con voz, camina segura.
                    </p>
                </div>
                <div class="footer-column">
                    <h4 class="footer-subtitle" data-es="Contacto" data-en="Contact">Contacto</h4>
                    <p class="footer-text">
                        Email: womap@gmail.com<br>
                        <span data-es="Tel√©fono:" data-en="Phone:">Tel√©fono:</span> +34 666 85 74 50
                    </p>
                </div>
                <div class="footer-column">
                    <h4 class="footer-subtitle" data-es="Informaci√≥n Legal" data-en="Legal Information">Informaci√≥n Legal</h4>
                    <p class="footer-text">WoMap S.L. | CIF: B-12345678</p>
                </div>
                <div class="footer-column">
                    <h4 class="footer-subtitle" data-es="S√≠guenos" data-en="Follow Us">S√≠guenos</h4>
                    <div class="footer-social">
                        <a href="#" class="social-link">Instagram</a>
                        <a href="#" class="social-link">Twitter</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WoMap. <span data-es="Todos los derechos reservados." data-en="All rights reserved.">Todos los derechos reservados.</span></p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        if (!localStorage.getItem('womap_user')) {
            window.location.href = 'login.html';
        }

        const editBtn = document.getElementById('editBtn');
        const saveBtn = document.getElementById('saveBtn');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const profileName = document.getElementById('profileName');
        const profileAge = document.getElementById('profileAge');
        const profileCity = document.getElementById('profileCity');
        const profileDescription = document.getElementById('profileDescription');
        const profileInterests = document.getElementById('profileInterests');
        const accountProfilePicture = document.getElementById('accountProfilePicture');

        editBtn.addEventListener('click', function() {
            editBtn.style.display = 'none';
            saveBtn.style.display = 'inline-block';
            changePhotoBtn.style.display = 'inline-block';
            profileName.removeAttribute('readonly');
            profileAge.removeAttribute('readonly');
            profileCity.removeAttribute('readonly');
            profileDescription.removeAttribute('readonly');
            profileInterests.removeAttribute('readonly');
            
            // Add editing visual feedback
            [profileName, profileAge, profileCity, profileDescription, profileInterests].forEach(field => {
                field.style.borderColor = 'var(--primary)';
            });
        });

        saveBtn.addEventListener('click', function() {
            saveBtn.style.display = 'none';
            changePhotoBtn.style.display = 'none';
            editBtn.style.display = 'inline-block';
            profileName.setAttribute('readonly', true);
            profileAge.setAttribute('readonly', true);
            profileCity.setAttribute('readonly', true);
            profileDescription.setAttribute('readonly', true);
            profileInterests.setAttribute('readonly', true);
            
            // Remove editing visual feedback
            [profileName, profileAge, profileCity, profileDescription, profileInterests].forEach(field => {
                field.style.borderColor = '';
            });
            
            // Save to localStorage
            const profile = {
                name: profileName.value,
                age: profileAge.value,
                city: profileCity.value,
                description: profileDescription.value,
                interests: profileInterests.value
            };
            localStorage.setItem('womap_profile', JSON.stringify(profile));
            
            const lang = localStorage.getItem('womap_language') || 'es';
            const message = lang === 'es' ? 'Perfil actualizado correctamente' : 'Profile updated successfully';
            alert(message);
        });

        changePhotoBtn.addEventListener('click', function() {
            accountProfilePicture.click();
        });

        accountProfilePicture.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const preview = document.getElementById('accountProfilePicturePreview');
                    preview.style.backgroundImage = `url(${event.target.result})`;
                    preview.innerHTML = '';
                    localStorage.setItem('womap_profile_picture', event.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        // Load saved profile
        const savedProfile = localStorage.getItem('womap_profile');
        if (savedProfile) {
            const profile = JSON.parse(savedProfile);
            profileName.value = profile.name;
            profileAge.value = profile.age;
            profileCity.value = profile.city;
            profileDescription.value = profile.description;
            profileInterests.value = profile.interests;
        }

        // Load saved profile picture
        const savedPicture = localStorage.getItem('womap_profile_picture');
        if (savedPicture) {
            const preview = document.getElementById('accountProfilePicturePreview');
            preview.style.backgroundImage = `url(${savedPicture})`;
            preview.innerHTML = '';
        }
    </script>
</body>
</html>
